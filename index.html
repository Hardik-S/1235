<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Legendary Gate Puzzle</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" />
  <link
    rel="preload"
    as="font"
    type="font/ttf"
    crossorigin
    href="https://fonts.gstatic.com/s/inter/v20/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuLyfMZg.ttf"
  />
  <link
    rel="preload"
    as="font"
    type="font/ttf"
    crossorigin
    href="https://fonts.gstatic.com/s/inter/v20/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuGKYMZg.ttf"
  />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <nav class="top-nav" aria-label="View navigation">
    <button id="navBack" type="button" class="top-nav__button" aria-label="Go to previous view">Back</button>
    <span class="top-nav__title">Trials of the Gatekeeper</span>
    <button id="navForward" type="button" class="top-nav__button" aria-label="Go to next view">Forward</button>
  </nav>

  <main class="views">
    <section id="viewLanding" class="view view--active" data-view="landing">
      <header class="page-header">
        <h1>Trials of the Gatekeeper</h1>
        <p>Follow the arcane instructions to unlock the gate, unveil the chest, and claim the final reward.</p>
      </header>

      <section id="gate" class="view-card gate gate--closed" aria-labelledby="gate-heading">
      <div class="view-icon" aria-hidden="true">ğŸ”</div>
      <div class="view-content">
        <h2 id="gate-heading">Gate Challenge</h2>
        <p>The sentry awaits your answer. Present the correct key phrase to pass through the gate.</p>
        <div id="gateFormContainer" class="gate-form-container">
          <form id="atlasForm" class="gate-form" novalidate>
            <label class="sr-only" for="atlas">Key phrase</label>
            <div class="gate-form__controls">
              <input
                id="atlas"
                name="atlas"
                type="text"
                inputmode="text"
                autocomplete="off"
                autocapitalize="none"
                spellcheck="false"
                aria-describedby="gateMsg"
                placeholder="Enter the key phrase"
                required
              />
              <button id="atlasBtn" type="submit">Unlock</button>
            </div>
          </form>
        </div>
        <p id="gateMsg" class="gate-message" role="status" aria-live="polite" aria-atomic="true"></p>
      </div>
    </section>
    </section>

    <section id="viewMap" class="view" data-view="map" hidden>
      <h2 id="mapViewHeading" class="sr-only" tabindex="-1">Atlas Survey Map</h2>
      <div class="map-view__frame">
        <iframe
          id="atlasMapFrame"
          title="Atlas Survey Map"
          loading="lazy"
          allowfullscreen
          referrerpolicy="no-referrer-when-downgrade"
          src="https://www.google.com/maps/d/u/0/embed?mid=1gmapNDxwT1NAWOiKRaxl_DWSC9Xx7uw&ehbc=2E312F"
        ></iframe>
      </div>
    </section>

    <section id="viewClue" class="view" data-view="clue" hidden>
      <section id="chest" class="view-card chest chest--locked" aria-labelledby="chest-heading">
        <div class="view-icon" aria-hidden="true">ğŸ§°</div>
        <div class="view-content">
          <h2 id="chest-heading" tabindex="-1">Chest Sequence</h2>
          <p>The warded chest hums with latent magic. Align the sigils to release the locking spell.</p>
          <div class="lock-panel">
            <p id="lockProgress" class="lock-progress" aria-live="polite" aria-atomic="true"></p>
            <section class="lock-planes" aria-labelledby="lockPlanesHeading">
              <div class="lock-planes__header">
                <h3 id="lockPlanesHeading">Lock Planes</h3>
                <p id="lockPlanesHint" class="lock-planes__hint">
                  Drag and drop to realign the six planes in their intended sequence.
                </p>
              </div>
              <ol
                id="lockPlanes"
                class="lock-planes__list"
                aria-describedby="lockPlanesHint"
                aria-live="polite"
              ></ol>
              <p id="lockPlanesSummary" class="lock-planes__summary" aria-live="polite"></p>
              <dl id="lockPlaneValues" class="lock-plane-values" aria-live="polite"></dl>
            </section>
            <form id="lockForm" class="lock-form" novalidate>
              <fieldset class="lock-code">
                <legend class="lock-code__legend">Sigil value sequence</legend>
                <p id="lockCodeHint" class="lock-code__hint">
                  Enter the six numeric values revealed by the aligned planes.
                </p>
                <div class="lock-code__inputs" role="group" aria-describedby="lockCodeHint lockMessage">
                  <div class="lock-code__cell">
                    <label class="sr-only lock-code__label" for="lockValue1">Value 1</label>
                    <input
                      id="lockValue1"
                      class="lock-code__input"
                      name="lockValue1"
                      type="text"
                      inputmode="decimal"
                      autocomplete="off"
                      spellcheck="false"
                      pattern="^-?[0-9]+(?:\.[0-9]{1,3})?$"
                      aria-describedby="lockCodeHint lockMessage"
                      placeholder="0"
                      data-index="0"
                      required
                    />
                  </div>
                  <div class="lock-code__cell">
                    <label class="sr-only lock-code__label" for="lockValue2">Value 2</label>
                    <input
                      id="lockValue2"
                      class="lock-code__input"
                      name="lockValue2"
                      type="text"
                      inputmode="decimal"
                      autocomplete="off"
                      spellcheck="false"
                      pattern="^-?[0-9]+(?:\.[0-9]{1,3})?$"
                      aria-describedby="lockCodeHint lockMessage"
                      placeholder="0"
                      data-index="1"
                      required
                    />
                  </div>
                  <div class="lock-code__cell">
                    <label class="sr-only lock-code__label" for="lockValue3">Value 3</label>
                    <input
                      id="lockValue3"
                      class="lock-code__input"
                      name="lockValue3"
                      type="text"
                      inputmode="decimal"
                      autocomplete="off"
                      spellcheck="false"
                      pattern="^-?[0-9]+(?:\.[0-9]{1,3})?$"
                      aria-describedby="lockCodeHint lockMessage"
                      placeholder="0"
                      data-index="2"
                      required
                    />
                  </div>
                  <div class="lock-code__cell">
                    <label class="sr-only lock-code__label" for="lockValue4">Value 4</label>
                    <input
                      id="lockValue4"
                      class="lock-code__input"
                      name="lockValue4"
                      type="text"
                      inputmode="decimal"
                      autocomplete="off"
                      spellcheck="false"
                      pattern="^-?[0-9]+(?:\.[0-9]{1,3})?$"
                      aria-describedby="lockCodeHint lockMessage"
                      placeholder="0"
                      data-index="3"
                      required
                    />
                  </div>
                  <div class="lock-code__cell">
                    <label class="sr-only lock-code__label" for="lockValue5">Value 5</label>
                    <input
                      id="lockValue5"
                      class="lock-code__input"
                      name="lockValue5"
                      type="text"
                      inputmode="decimal"
                      autocomplete="off"
                      spellcheck="false"
                      pattern="^-?[0-9]+(?:\.[0-9]{1,3})?$"
                      aria-describedby="lockCodeHint lockMessage"
                      placeholder="0"
                      data-index="4"
                      required
                    />
                  </div>
                  <div class="lock-code__cell">
                    <label class="sr-only lock-code__label" for="lockValue6">Value 6</label>
                    <input
                      id="lockValue6"
                      class="lock-code__input"
                      name="lockValue6"
                      type="text"
                      inputmode="decimal"
                      autocomplete="off"
                      spellcheck="false"
                      pattern="^-?[0-9]+(?:\.[0-9]{1,3})?$"
                      aria-describedby="lockCodeHint lockMessage"
                      placeholder="0"
                      data-index="5"
                      required
                    />
                  </div>
                </div>
              </fieldset>
              <button id="lockBtn" type="submit">Unlock Chest</button>
            </form>
            <p id="lockMessage" class="lock-message" role="status" aria-live="polite" aria-atomic="true"></p>
          </div>
        </div>
      </section>

      <section id="reward" class="view-card reward reward--sealed" aria-labelledby="reward-heading">
        <div class="view-icon" aria-hidden="true">ğŸ–ï¸</div>
        <div class="view-content">
          <h2 id="reward-heading">Reward Chamber</h2>
          <p>The chamber awaits your triumph. Claim the relic once the gate and chest trials are complete.</p>
          <div class="reward-card" role="status" aria-live="polite" aria-atomic="true">
            <p class="reward-card__intro">The gatekeeper proclaims your victory. Take your spoils:</p>
            <ul class="reward-list">
              <li class="reward-list__item">
                <span class="reward-list__icon" aria-hidden="true">ğŸŒŸ</span>
                <span class="reward-list__text">Starlit Emblem of Passage</span>
              </li>
              <li class="reward-list__item">
                <span class="reward-list__icon" aria-hidden="true">ğŸ—ï¸</span>
                <span class="reward-list__text">Key of Renewed Paths</span>
              </li>
              <li class="reward-list__item">
                <span class="reward-list__icon" aria-hidden="true">ğŸ“œ</span>
                <span class="reward-list__text">Charter of the Gatekeeper's Guild</span>
              </li>
            </ul>
            <button id="resetBtn" type="button" class="reset-button">Reset the Trials</button>
          </div>
        </div>
      </section>
    </section>
  </main>

  <script type="module" src="script.js" defer></script>
</body>
</html>
