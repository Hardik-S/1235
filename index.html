<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Legendary Gate Puzzle</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" />
  <link
    rel="preload"
    as="font"
    type="font/ttf"
    crossorigin
    href="https://fonts.gstatic.com/s/inter/v20/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuLyfMZg.ttf"
  />
  <link
    rel="preload"
    as="font"
    type="font/ttf"
    crossorigin
    href="https://fonts.gstatic.com/s/inter/v20/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuGKYMZg.ttf"
  />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <nav class="top-nav" aria-label="View navigation">
    <button id="navBack" type="button" class="top-nav__button" aria-label="Go to previous view">Back</button>
    <span class="top-nav__title">Trials of the Gatekeeper</span>
    <button id="navForward" type="button" class="top-nav__button" aria-label="Go to next view">Forward</button>
  </nav>

  <main class="views">
    <section id="viewLanding" class="view view--active" data-view="landing">
      <header class="page-header">
        <h1>Trials of the Gatekeeper</h1>
        <p>Follow the arcane instructions to unlock the gate, unveil the chest, and claim the final reward.</p>
      </header>

      <section id="gate" class="view-card gate gate--closed" aria-labelledby="gate-heading">
      <div class="view-icon" aria-hidden="true">üîê</div>
      <div class="view-content">
        <h2 id="gate-heading">Gate Challenge</h2>
        <p>The sentry awaits your answer. Present the correct key phrase to pass through the gate.</p>
        <div id="gateFormContainer" class="gate-form-container">
          <form id="atlasForm" class="gate-form" novalidate>
            <label class="sr-only" for="atlas">Key phrase</label>
            <div class="gate-form__controls">
              <input
                id="atlas"
                name="atlas"
                type="text"
                inputmode="text"
                autocomplete="off"
                autocapitalize="none"
                spellcheck="false"
                aria-describedby="gateMsg"
                placeholder="Enter the key phrase"
                required
              />
              <button id="atlasBtn" type="submit">Unlock</button>
            </div>
          </form>
        </div>
        <p id="gateMsg" class="gate-message" role="status" aria-live="polite" aria-atomic="true"></p>
      </div>
    </section>
    </section>

    <section id="viewMap" class="view" data-view="map" hidden>
      <h2 id="mapViewHeading" class="sr-only" tabindex="-1">Atlas Survey Map</h2>
      <div class="map-view__frame">
        <iframe
          id="atlasMapFrame"
          title="Atlas Survey Map"
          loading="lazy"
          allowfullscreen
          referrerpolicy="no-referrer-when-downgrade"
          src="https://www.google.com/maps/d/u/0/embed?mid=1gmapNDxwT1NAWOiKRaxl_DWSC9Xx7uw&ehbc=2E312F"
        ></iframe>
      </div>
    </section>

    <section id="viewClue" class="view" data-view="clue" hidden>
      <section id="sigilBoard" class="view-card sigil-board" aria-labelledby="sigilBoardHeading">
        <div class="view-icon" aria-hidden="true">üß©</div>
        <div class="view-content sigil-board__content">
          <h2 id="sigilBoardHeading" tabindex="-1">Sigil Alignment</h2>
          <p class="sigil-board__intro">Select the six true sigils in the correct order to awaken the gate.</p>
          <div class="sigil-board__layout" role="group" aria-label="Sigil alignment workspace">
            <section class="sigil-panel sigil-panel--cache" aria-labelledby="sigilCacheHeading">
              <header class="sigil-panel__header">
                <h3 id="sigilCacheHeading">Word Cache</h3>
                <p>Tap a word to send it to the solution below.</p>
              </header>
              <ul id="sigilCache" class="sigil-cache" aria-live="polite" aria-label="Available words"></ul>
            </section>
            <section class="sigil-panel sigil-panel--solution" aria-labelledby="sigilSolutionHeading">
              <header class="sigil-panel__header">
                <h3 id="sigilSolutionHeading">Ordered Solution</h3>
                <p>Fill each slot from left to right. Tap a filled slot to clear it.</p>
              </header>
              <ol
                id="sigilSolution"
                class="sigil-solution"
                aria-label="Chosen sigils"
                aria-live="polite"
                aria-atomic="true"
              ></ol>
              <p id="sigilStatus" class="sigil-status" role="status" aria-live="polite" aria-atomic="true"></p>
            </section>
          </div>
        </div>
      </section>
    </section>

    <section id="viewReward" class="view" data-view="reward" hidden>
      <section id="reward" class="view-card reward reward--sealed" aria-labelledby="reward-heading">
        <div class="view-icon" aria-hidden="true">üéñÔ∏è</div>
        <div class="view-content">
          <h2 id="reward-heading" tabindex="-1">Reward Chamber</h2>
          <p>The chamber awaits your triumph. Claim the relic once the sigils align.</p>
          <div class="reward-card" role="status" aria-live="polite" aria-atomic="true">
            <p class="reward-card__intro">The gatekeeper proclaims your victory. Decode the ledger to open the vault.</p>
            <div class="treasure-challenge">
              <section class="treasure-challenge__ledger" aria-labelledby="treasureLedgerHeading">
                <h3 id="treasureLedgerHeading">Sigil Resonance Ledger</h3>
                <p class="treasure-challenge__help">Ordered sigils with their computed resonance values.</p>
                <ol id="rewardSequence" class="reward-sequence" aria-live="polite"></ol>
              </section>
              <section class="treasure-challenge__vault" aria-labelledby="treasureVaultHeading">
                <h3 id="treasureVaultHeading">Vault Access Challenge</h3>
                <p class="treasure-challenge__help">Enter the six resonance values in order to release the warded chest.</p>
                <div id="treasureChest" class="treasure-chest" aria-hidden="true">
                  <svg class="treasure-chest__art treasure-chest__art--closed" viewBox="0 0 240 180" role="img" aria-label="Closed treasure chest">
                    <rect x="20" y="70" width="200" height="90" rx="18" fill="#8b5e3c" />
                    <rect x="20" y="70" width="200" height="40" rx="18" fill="#9c6b45" />
                    <rect x="34" y="84" width="172" height="62" rx="12" fill="#d4a574" />
                    <rect x="95" y="96" width="50" height="36" rx="8" fill="#704225" />
                    <rect x="105" y="96" width="30" height="36" rx="6" fill="#f4d06f" />
                    <rect x="102" y="60" width="36" height="20" rx="6" fill="#f7e3a6" />
                    <path d="M20 70h200l-12-40H32z" fill="#c68a53" />
                    <path d="M32 30h176l10 30H22z" fill="#d99a63" />
                    <path d="M20 70h200v12H20z" fill="#62381f" opacity="0.2" />
                  </svg>
                  <svg
                    class="treasure-chest__art treasure-chest__art--open"
                    viewBox="0 0 260 200"
                    role="img"
                    aria-label="Open treasure chest overflowing with gold coins, coupons, and snacks"
                  >
                    <defs>
                      <linearGradient id="coinGradient" x1="0%" x2="0%" y1="0%" y2="100%">
                        <stop offset="0%" stop-color="#ffe066" />
                        <stop offset="100%" stop-color="#f4c10f" />
                      </linearGradient>
                      <linearGradient id="couponGradient" x1="0%" x2="100%" y1="0%" y2="0%">
                        <stop offset="0%" stop-color="#f8cdda" />
                        <stop offset="100%" stop-color="#f9a8d4" />
                      </linearGradient>
                      <linearGradient id="snackGradient" x1="0%" x2="100%" y1="0%" y2="0%">
                        <stop offset="0%" stop-color="#f7b267" />
                        <stop offset="100%" stop-color="#f79d65" />
                      </linearGradient>
                    </defs>
                    <path d="M34 76h192l-20-60H54z" fill="#d99a63" />
                    <path d="M34 76h192v22H34z" fill="#62381f" opacity="0.25" />
                    <rect x="32" y="88" width="196" height="90" rx="18" fill="#8b5e3c" />
                    <rect x="48" y="110" width="164" height="64" rx="14" fill="#d4a574" />
                    <rect x="110" y="120" width="40" height="46" rx="8" fill="#704225" />
                    <rect x="118" y="120" width="24" height="46" rx="6" fill="#f4d06f" />
                    <g class="treasure-chest__coins">
                      <circle cx="80" cy="108" r="18" fill="url(#coinGradient)" />
                      <circle cx="100" cy="92" r="20" fill="url(#coinGradient)" />
                      <circle cx="140" cy="84" r="18" fill="url(#coinGradient)" />
                      <circle cx="170" cy="96" r="16" fill="url(#coinGradient)" />
                      <circle cx="190" cy="114" r="18" fill="url(#coinGradient)" />
                    </g>
                    <g class="treasure-chest__coupon">
                      <rect x="72" y="68" width="84" height="32" rx="6" fill="url(#couponGradient)" />
                      <path d="M84 78h20" stroke="#fff" stroke-width="3" stroke-linecap="round" />
                      <path d="M110 78h20" stroke="#fff" stroke-width="3" stroke-linecap="round" />
                      <circle cx="148" cy="84" r="6" fill="#fff" opacity="0.85" />
                    </g>
                    <g class="treasure-chest__snack">
                      <path d="M156 64c12 0 28 10 36 22 6 10 2 20-10 20s-28-10-36-22c-6-10-2-20 10-20z" fill="url(#snackGradient)" />
                      <circle cx="168" cy="76" r="4" fill="#fff6d5" />
                      <circle cx="182" cy="82" r="4" fill="#fff6d5" />
                    </g>
                    <g class="treasure-chest__sparkles" fill="#fdf5c9">
                      <path d="M54 62l4 10 10 4-10 4-4 10-4-10-10-4 10-4z" />
                      <path d="M214 72l3 8 8 3-8 3-3 8-3-8-8-3 8-3z" />
                      <path d="M132 48l3 7 7 3-7 3-3 7-3-7-7-3 7-3z" />
                    </g>
                  </svg>
                </div>
                <form id="treasureForm" class="treasure-form" novalidate aria-describedby="treasureMessage">
                  <fieldset class="treasure-form__fieldset">
                    <legend class="treasure-form__legend">Enter resonance values</legend>
                    <div class="treasure-form__inputs">
                      <label class="sr-only" for="treasureInput0">Value for sigil 1</label>
                      <input
                        id="treasureInput0"
                        class="treasure-input"
                        name="treasureInput0"
                        type="number"
                        inputmode="numeric"
                        autocomplete="off"
                        aria-label="Value for sigil 1"
                        required
                      />
                      <label class="sr-only" for="treasureInput1">Value for sigil 2</label>
                      <input
                        id="treasureInput1"
                        class="treasure-input"
                        name="treasureInput1"
                        type="number"
                        inputmode="numeric"
                        autocomplete="off"
                        aria-label="Value for sigil 2"
                        required
                      />
                      <label class="sr-only" for="treasureInput2">Value for sigil 3</label>
                      <input
                        id="treasureInput2"
                        class="treasure-input"
                        name="treasureInput2"
                        type="number"
                        inputmode="numeric"
                        autocomplete="off"
                        aria-label="Value for sigil 3"
                        required
                      />
                      <label class="sr-only" for="treasureInput3">Value for sigil 4</label>
                      <input
                        id="treasureInput3"
                        class="treasure-input"
                        name="treasureInput3"
                        type="number"
                        inputmode="numeric"
                        autocomplete="off"
                        aria-label="Value for sigil 4"
                        required
                      />
                      <label class="sr-only" for="treasureInput4">Value for sigil 5</label>
                      <input
                        id="treasureInput4"
                        class="treasure-input"
                        name="treasureInput4"
                        type="number"
                        inputmode="numeric"
                        autocomplete="off"
                        aria-label="Value for sigil 5"
                        required
                      />
                      <label class="sr-only" for="treasureInput5">Value for sigil 6</label>
                      <input
                        id="treasureInput5"
                        class="treasure-input"
                        name="treasureInput5"
                        type="number"
                        inputmode="numeric"
                        autocomplete="off"
                        aria-label="Value for sigil 6"
                        required
                      />
                    </div>
                  </fieldset>
                  <button type="submit" class="treasure-form__submit">Unseal the Chest</button>
                </form>
                <p id="treasureMessage" class="treasure-message" role="status" aria-live="polite" aria-atomic="true"></p>
              </section>
            </div>
            <ul class="reward-list">
              <li class="reward-list__item">
                <span class="reward-list__icon" aria-hidden="true">üåü</span>
                <span class="reward-list__text">Starlit Emblem of Passage</span>
              </li>
              <li class="reward-list__item">
                <span class="reward-list__icon" aria-hidden="true">üóùÔ∏è</span>
                <span class="reward-list__text">Key of Renewed Paths</span>
              </li>
              <li class="reward-list__item">
                <span class="reward-list__icon" aria-hidden="true">üìú</span>
                <span class="reward-list__text">Charter of the Gatekeeper's Guild</span>
              </li>
            </ul>
            <button id="resetBtn" type="button" class="reset-button">Reset the Trials</button>
          </div>
        </div>
      </section>
    </section>
  </main>

  <div id="sigilSuccess" class="sigil-success" role="status" aria-live="assertive" hidden>
    <p class="sigil-success__text">Sigils aligned! Advancing‚Ä¶</p>
  </div>

  <script type="module" src="script.js" defer></script>
</body>
</html>
