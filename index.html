<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Legendary Gate Puzzle</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" />
  <link
    rel="preload"
    as="font"
    type="font/ttf"
    crossorigin
    href="https://fonts.gstatic.com/s/inter/v20/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuLyfMZg.ttf"
  />
  <link
    rel="preload"
    as="font"
    type="font/ttf"
    crossorigin
    href="https://fonts.gstatic.com/s/inter/v20/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuGKYMZg.ttf"
  />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <nav class="top-nav" aria-label="View navigation">
    <button id="navBack" type="button" class="top-nav__button" aria-label="Go to previous view">Back</button>
    <span class="top-nav__title">Trials of the Gatekeeper</span>
    <button id="navForward" type="button" class="top-nav__button" aria-label="Go to next view">Forward</button>
  </nav>

  <main class="views">
    <section id="viewLanding" class="view view--active" data-view="landing">
      <header class="page-header">
        <h1>Trials of the Gatekeeper</h1>
        <p>Follow the arcane instructions to unlock the gate, unveil the chest, and claim the final reward.</p>
      </header>

      <section id="gate" class="view-card gate gate--closed" aria-labelledby="gate-heading">
      <div class="view-icon" aria-hidden="true">🔐</div>
      <div class="view-content">
        <h2 id="gate-heading">Gate Challenge</h2>
        <p>The sentry awaits your answer. Present the correct key phrase to pass through the gate.</p>
        <div id="gateFormContainer" class="gate-form-container">
          <form id="atlasForm" class="gate-form" novalidate>
            <label class="sr-only" for="atlas">Key phrase</label>
            <div class="gate-form__controls">
              <input
                id="atlas"
                name="atlas"
                type="text"
                inputmode="text"
                autocomplete="off"
                autocapitalize="none"
                spellcheck="false"
                aria-describedby="gateMsg"
                placeholder="Enter the key phrase"
                required
              />
              <button id="atlasBtn" type="submit">Unlock</button>
            </div>
          </form>
        </div>
        <p id="gateMsg" class="gate-message" role="status" aria-live="polite" aria-atomic="true"></p>
      </div>
    </section>
    </section>

    <section id="viewMap" class="view" data-view="map" hidden>
      <h2 id="mapViewHeading" class="sr-only" tabindex="-1">Atlas Survey Map</h2>
      <div class="map-view__frame">
        <iframe
          id="atlasMapFrame"
          title="Atlas Survey Map"
          loading="lazy"
          allowfullscreen
          referrerpolicy="no-referrer-when-downgrade"
          src="https://www.google.com/maps/d/u/0/embed?mid=1gmapNDxwT1NAWOiKRaxl_DWSC9Xx7uw&ehbc=2E312F"
        ></iframe>
      </div>
    </section>

    <section id="viewClue" class="view" data-view="clue" hidden>
      <section id="sigilBoard" class="view-card sigil-board" aria-labelledby="sigilBoardHeading">
        <div class="view-icon" aria-hidden="true">🧩</div>
        <div class="view-content">
          <h2 id="sigilBoardHeading" tabindex="-1">Sigil Alignment</h2>
          <p class="sigil-board__intro">
            Gather the scattered words, arrange them upon the staging grid, and align the six true sigils in
            order. When the pattern is perfect, the gate's magic will surge.
          </p>
          <div class="sigil-board__sections" role="group" aria-label="Sigil alignment sections">
            <div class="sigil-screen sigil-screen--source">
              <section class="sigil-zone sigil-zone--source" aria-labelledby="sigilSourceHeading">
                <header class="sigil-zone__header">
                  <h3 id="sigilSourceHeading">Section 1: Word Cache</h3>
                  <p>Shuffled on each visit. Select a sigil to send it to the staging grid.</p>
                </header>
                <div class="sigil-zone__body">
                  <ul id="sigilSource" class="sigil-list" aria-live="polite" aria-label="Available words"></ul>
                </div>
              </section>
            </div>
            <div class="sigil-gap" aria-hidden="true"></div>
            <div class="sigil-screen sigil-screen--staging">
              <section class="sigil-zone sigil-zone--staging" aria-labelledby="sigilStagingHeading">
                <header class="sigil-zone__header">
                  <h3 id="sigilStagingHeading">Section 2: Staging Grid</h3>
                  <p>Three columns and two rows. Use the controls on each tile to advance or retreat.</p>
                </header>
                <div class="sigil-zone__body">
                  <div id="sigilStaging" class="staging-grid" role="grid" aria-label="Staging grid"></div>
                </div>
              </section>
            </div>
            <div class="sigil-gap" aria-hidden="true"></div>
            <div class="sigil-screen sigil-screen--final">
              <section class="sigil-zone sigil-zone--final" aria-labelledby="sigilFinalHeading">
                <header class="sigil-zone__header">
                  <h3 id="sigilFinalHeading">Section 3: Alignment Columns</h3>
                  <p>Fill each column with the destined word. Tiles rotate to face the barrier.</p>
                </header>
                <div class="sigil-zone__body">
                  <div id="sigilFinal" class="final-columns" role="group" aria-label="Alignment columns"></div>
                </div>
              </section>
            </div>
          </div>
        </div>
      </section>
    </section>

    <section id="viewReward" class="view" data-view="reward" hidden>
      <section id="reward" class="view-card reward reward--sealed" aria-labelledby="reward-heading">
        <div class="view-icon" aria-hidden="true">🎖️</div>
        <div class="view-content">
          <h2 id="reward-heading" tabindex="-1">Reward Chamber</h2>
          <p>The chamber awaits your triumph. Claim the relic once the sigils align.</p>
          <div class="reward-card" role="status" aria-live="polite" aria-atomic="true">
            <p class="reward-card__intro">The gatekeeper proclaims your victory. Take your spoils:</p>
            <ul class="reward-list">
              <li class="reward-list__item">
                <span class="reward-list__icon" aria-hidden="true">🌟</span>
                <span class="reward-list__text">Starlit Emblem of Passage</span>
              </li>
              <li class="reward-list__item">
                <span class="reward-list__icon" aria-hidden="true">🗝️</span>
                <span class="reward-list__text">Key of Renewed Paths</span>
              </li>
              <li class="reward-list__item">
                <span class="reward-list__icon" aria-hidden="true">📜</span>
                <span class="reward-list__text">Charter of the Gatekeeper's Guild</span>
              </li>
            </ul>
            <button id="resetBtn" type="button" class="reset-button">Reset the Trials</button>
          </div>
        </div>
      </section>
    </section>
  </main>

  <div id="sigilSuccess" class="sigil-success" role="status" aria-live="assertive" hidden>
    <p class="sigil-success__text">Sigils aligned! Advancing…</p>
  </div>

  <script type="module" src="script.js" defer></script>
</body>
</html>
