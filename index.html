<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Legendary Gate Puzzle</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" />
  <link
    rel="preload"
    as="font"
    type="font/ttf"
    crossorigin
    href="https://fonts.gstatic.com/s/inter/v20/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuLyfMZg.ttf"
  />
  <link
    rel="preload"
    as="font"
    type="font/ttf"
    crossorigin
    href="https://fonts.gstatic.com/s/inter/v20/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuGKYMZg.ttf"
  />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="page-header">
    <h1>Trials of the Gatekeeper</h1>
    <p>Follow the arcane instructions to unlock the gate, unveil the chest, and claim the final reward.</p>
  </header>

  <main class="views">
    <section id="gate" class="view-card gate gate--closed" aria-labelledby="gate-heading">
      <div class="view-icon" aria-hidden="true">ğŸ”</div>
      <div class="view-content">
        <h2 id="gate-heading">Gate Challenge</h2>
        <p>The sentry awaits your answer. Present the correct key phrase to pass through the gate.</p>
        <div id="gateFormContainer" class="gate-form-container">
          <form id="atlasForm" class="gate-form" novalidate>
            <label class="sr-only" for="atlas">Key phrase</label>
            <div class="gate-form__controls">
              <input
                id="atlas"
                name="atlas"
                type="text"
                inputmode="text"
                autocomplete="off"
                autocapitalize="none"
                spellcheck="false"
                aria-describedby="gateMsg"
                placeholder="Enter the key phrase"
                required
              />
              <button id="atlasBtn" type="submit">Unlock</button>
            </div>
          </form>
        </div>
        <p id="gateMsg" class="gate-message" role="status" aria-live="polite" aria-atomic="true"></p>
        <section
          id="gateMap"
          class="gate-map"
          aria-labelledby="gateMapHeading"
          hidden
        >
          <h3 id="gateMapHeading" class="gate-map__heading" tabindex="-1">Atlas Survey Site</h3>
          <p class="gate-map__intro">
            The coordinates align before you. Study the terrain to chart your next move
            before advancing to the chest's sigils.
          </p>
          <div class="gate-map__frame">
            <iframe
              id="atlasMapFrame"
              title="Atlas Gate Coordinates"
              loading="lazy"
              allowfullscreen
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3023.937625709486!2d-73.98566482342625!3d40.74844037138812!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c259af18c9dd35%3A0xcee4d6f90d11fdcb!2sEmpire%20State%20Building!5e0!3m2!1sen!2sus!4v1714684800000!5m2!1sen!2sus"
            ></iframe>
          </div>
          <p class="gate-map__note">
            Once the landscape is committed to memory, the path to the chest will reveal itself.
          </p>
        </section>
      </div>
    </section>

    <section id="chest" class="view-card chest chest--locked" aria-labelledby="chest-heading">
      <div class="view-icon" aria-hidden="true">ğŸ§°</div>
      <div class="view-content">
        <h2 id="chest-heading" tabindex="-1">Chest Sequence</h2>
        <p>The warded chest hums with latent magic. Align the sigils to release the locking spell.</p>
        <div class="lock-panel">
          <p id="lockProgress" class="lock-progress" aria-live="polite" aria-atomic="true"></p>
          <section class="lock-planes" aria-labelledby="lockPlanesHeading">
            <div class="lock-planes__header">
              <h3 id="lockPlanesHeading">Lock Planes</h3>
              <p id="lockPlanesHint" class="lock-planes__hint">
                Drag and drop to realign the six planes in their intended sequence.
              </p>
            </div>
            <ol
              id="lockPlanes"
              class="lock-planes__list"
              aria-describedby="lockPlanesHint"
              aria-live="polite"
            ></ol>
            <p id="lockPlanesSummary" class="lock-planes__summary" aria-live="polite"></p>
            <dl id="lockPlaneValues" class="lock-plane-values" aria-live="polite"></dl>
          </section>
          <ol id="lockGrid" class="lock-grid" aria-label="Chest lock sequence"></ol>
          <form id="lockForm" class="lock-form" novalidate>
            <label class="sr-only" for="lockInput">Sigil word</label>
            <div class="lock-form__controls">
              <input
                id="lockInput"
                name="lockInput"
                type="text"
                inputmode="text"
                autocomplete="off"
                autocapitalize="none"
                spellcheck="false"
                aria-describedby="lockMessage lockProgress"
                placeholder="Enter the next sigil"
                required
              />
              <button id="lockBtn" type="submit">Align</button>
            </div>
          </form>
          <p id="lockMessage" class="lock-message" role="status" aria-live="polite" aria-atomic="true"></p>
        </div>
      </div>
    </section>

    <section id="reward" class="view-card reward reward--sealed" aria-labelledby="reward-heading">
      <div class="view-icon" aria-hidden="true">ğŸ–ï¸</div>
      <div class="view-content">
        <h2 id="reward-heading">Reward Chamber</h2>
        <p>The chamber awaits your triumph. Claim the relic once the gate and chest trials are complete.</p>
        <div class="reward-card" role="status" aria-live="polite" aria-atomic="true">
          <p class="reward-card__intro">The gatekeeper proclaims your victory. Take your spoils:</p>
          <ul class="reward-list">
            <li class="reward-list__item">
              <span class="reward-list__icon" aria-hidden="true">ğŸŒŸ</span>
              <span class="reward-list__text">Starlit Emblem of Passage</span>
            </li>
            <li class="reward-list__item">
              <span class="reward-list__icon" aria-hidden="true">ğŸ—ï¸</span>
              <span class="reward-list__text">Key of Renewed Paths</span>
            </li>
            <li class="reward-list__item">
              <span class="reward-list__icon" aria-hidden="true">ğŸ“œ</span>
              <span class="reward-list__text">Charter of the Gatekeeper's Guild</span>
            </li>
          </ul>
          <button id="resetBtn" type="button" class="reset-button">Reset the Trials</button>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="script.js" defer></script>
</body>
</html>
